<!-- Contribution Ribbon -->
<div class="ribbon"><a target="_blank" href="https://github.com/w3f/polkadot-spec">Contributions welcome!</a></div>

<!-- Tocbot, dynamic table of contents -->
<!-- Full credit goes to https://github.com/asciidoctor/asciidoctor/issues/699#issuecomment-321066006 -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.11.1/tocbot.min.js"></script>

<style>
  #tocbot a.toc-link.node-name--H1{ font-style: italic }
  @media screen{
    #tocbot > ul.toc-list{ margin-bottom: 0.5em; margin-left: 0.125em }
    #tocbot ul.sectlevel0, #tocbot a.toc-link.node-name--H1 + ul{
      padding-left: 0 }
    #tocbot a.toc-link{ height:100% }
    .is-collapsible{ max-height:3000px; overflow:hidden; }
    .is-collapsed{ max-height:0 }
    .is-active-link{ font-weight:700 }
  }
  @media print{
    #tocbot a.toc-link.node-name--H4{ display:none }
  }
</style>

<script>
	document.addEventListener('DOMContentLoaded', function() {
		/* Tocbot dynamic TOC, works with tocbot 3.0.2 */
		var oldtoc = document.getElementById('toctitle').nextElementSibling;
		var newtoc = document.createElement('div');
		newtoc.setAttribute('id', 'tocbot');
		newtoc.setAttribute('class', 'js-toc');
		oldtoc.parentNode.replaceChild(newtoc, oldtoc);
		tocbot.init({ contentSelector: '#content',
			headingSelector: 'h1, h2, h3, h4',
			smoothScroll: false });
		var handleTocOnResize = function() {
			var width = window.innerWidth
						|| document.documentElement.clientWidth
						|| document.body.clientWidth;
			if (width < 768) {
				tocbot.refresh({ contentSelector: '#content',
					headingSelector: 'h1, h2, h3, h4',
					collapseDepth: 6,
					activeLinkClass: 'ignoreactive',
					throttleTimeout: 1000,
					smoothScroll: false });
			}
			else {
				tocbot.refresh({ contentSelector: '#content',
					headingSelector: 'h1, h2, h3, h4',
					smoothScroll: false });
			}
		};
		window.addEventListener('resize', handleTocOnResize);
		handleTocOnResize();
	}, false);
</script>
