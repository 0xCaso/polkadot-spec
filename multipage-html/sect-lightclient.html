<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.18">
<meta name="description" content="The Official Polkadot and Kusama Protocol Specification">
<meta name="keywords" content="babe, blockchain, consensus, finality, grandpa, kusama, parachain, polkadot, relay-chain, runtime, spec, web3, w3f">
<meta name="author" content="Web 3.0 Technologies Foundation">
<link rel="icon" type="image/png" href="./favicon.png">
<title>Polkadot Protocol Specification</title>
<style>
/* Fetch Unbounded - Normal - Regular */
@import url('https://fonts.googleapis.com/css2?family=Unbounded:wght@400&display=swap');
/* Fetch Work Sans - Normal + Italic - Regular + Bold */
@import url('https://fonts.googleapis.com/css2?family=Work+Sans:ital,wght@0,400;0,700;1,400;1,700&display=swap');
/* Fetch Asciidoctor Default Style Sheet */
@import url('https://cdn.jsdelivr.net/gh/asciidoctor/asciidoctor@2.0/data/stylesheets/asciidoctor-default.css');

/* Base constants of theme */
:root {
	--font-header: 'Unbounded', cursive;
	--font-text: 'Work Sans', sans-serif;

	--black: #1E1E1E;
	--white: #FFFFFF;

	--dark-blue: #172026;
	--grey: #efefef;

	--pink: #E6007A;
	--purple: #670d35;
}


/* Apply some layout corrections */
html {
	height: 100%;
}

body {
	min-height: 100%;
  	display: flex;
  	flex-direction: column;
}

.partintro {
	margin-bottom: 1.25rem;
}

/* Render part intros just like other text */
.partintro div.content {
	line-height: 1.6;
	font-size: 1.0625rem;
	letter-spacing: -.01em;
	text-rendering: optimizeLegibility;
}

/* Set our custom font */
body {
	font-family: var(--font-text);
}

h1, h2, h3, h4, h5, h6,
#toctitle,
#toc ul.sectlevel0 > li > a,
.sidebarblock > .content > .title {
	font-family: var(--font-header);
	font-weight: 400;
}

#toc ul{
	font-family: var(--font-text);
}

/* Set base colors */
body {
	color: var(--black);
	background-color: var(--white);
}

/* Style all titles */
h1, h2, h3, h4, h5, h6,
#toctitle,
.subheader,
.title {
	color: var(--pink);
}

/* - could be replaced by !important in previous block */
.sidebarblock > .content > .title,
.admonitionblock td.content > .title,
.audioblock > .title,
.exampleblock > .title,
.imageblock > .title,
.listingblock > .title,
.literalblock > .title,
.stemblock > .title,
.openblock > .title,
.paragraph > .title,
.quoteblock > .title,
table.tableblock > .title,
.verseblock > .title,
.videoblock > .title,
.dlist > .title,
.olist > .title,
.ulist > .title,
.qlist > .title,
.hdlist > .title {
	color: inherit;
}

h1 code,
h2 code,
h3 code,
h4 code,
h5 code,
h6 code {
    color: inherit;
}

/* Style all links */
a {
	color: var(--pink);
}

a:hover {
	color: var(--purple);
}

/* - same here, next two blocks or important above */
#content h1 > a.link,
h2 > a.link,
h3 > a.link, #toctitle > a.link,
h4 > a.link,
h5 > a.link,
h6 > a.link,
.sidebarblock > .content > .title > a.link {
	color: inherit;
}

#content h1 > a.link:hover,
h2 > a.link:hover,
h3 > a.link:hover,
h4 > a.link:hover,
h5 > a.link:hover,
h6 > a.link:hover,
#toctitle > a.link:hover,
.sidebarblock > .content > .title > a.link:hover {
	color: var(--purple);
}

/* Style header like toc on small screens */
@media screen and (max-width:768px) {
	#header {
		background-color: var(--dark-blue);
		max-width: none;
	}

	#header > h1:first-child {
  		color: var(--pink);
	}

	#header .details {
  		color: var(--white);
		border: none;
	}
}

/* Style table of content */
#toc.toc2 {
	background-color: var(--dark-blue);
	border: none;
}

#toc ul.sectlevel0 > li > a {
  font-weight: bold;
  font-style: normal;
  text-decoration: underline;
}

#toc a {
	color: var(--white);
}

#toc a code {
	color: inherit;
	background-color: inherit;
}

#toc a .toc-current,
#toc .tocify-focus a {
	color: var(--pink);
}

/* Tame SVG images */
.imageblock .content svg {
  max-width: 100%;
}

/* Style boxes */
.exampleblock > .content, 
.sidebarblock {
	background: var(--grey);
}

/* Style footer */
#footer {
	color: var(--white);
	background-color: var(--dark-blue);
}

/* CSS Ribbon */
.ribbon {
  position: absolute;
  width: 200px;
  height: 200px;
  overflow: hidden;
  z-index: 99999;
  top: 0px;
  right: 0px;
}

.ribbon a {
  display: inline-block;
  position: inherit;
  transform: rotate(45deg);
  width: 200px;
  top: 45px; 
  right: -40px;
  padding: 6px 0px;
  overflow: hidden;

  text-align: center;
  font-size: 12px;
  font-weight: bold;
  text-decoration: none;

  color: var(--white);
  background-color: var(--pink);
  background-image: linear-gradient(rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.15));
  border: 2px dotted var(--white);
  box-shadow: rgba(0, 0, 0, 0.5) 0px 2px 3px 0px;
}

/* MathJax v3 */
.stemblock mjx-container {
  text-align: center;
  display: block;
  width: 100%;
  margin: 1em 0em;
}

/* Pseudocode.js */
.ps-root {
  font-size: 1.2em !important;
}

/* Fix inline svg with fixed width or height. */
.imageblock .content svg {
  widht: auto;
  height: auto;
}

</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>.toc-current{font-weight: bold;} .toc-root{font-family: "Open Sans","DejaVu Sans",sans-serif;
                       font-size: 0.9em;} #content{display: flex; flex-direction: column; flex: 1 1 auto;}
             .nav-footer{text-align: center; margin-top: auto;}
             .nav-footer > p > a {white-space: nowrap;}</style>
</head>
<body id="sect-lightclient" class="book toc2 toc-left">
<!-- Contribution Ribbon -->
<div class="ribbon"><a target="_blank" href="https://github.com/w3f/polkadot-spec">Contributions welcome!</a></div>
<div id="header">
<h1>Polkadot Protocol Specification</h1>
<div class="details">
<span id="author" class="author">Web 3.0 Technologies Foundation</span><br>
<span id="revnumber">version 0.2.1</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<p><span class="toc-root"><a href="polkadot-spec.html">Polkadot Protocol Specification</a></span></p><ul class="sectlevel1">
<li><a href="id-polkadot-protocol.html">Polkadot Protocol</a>
</li>
<li><a href="part-polkadot-host.html">Polkadot Host</a>
<ul class="sectlevel1">
<li><a href="chap-overview.html">1. Overview</a>
</li>
<li><a href="chap-state.html">2. States and Transitions</a>
</li>
<li><a href="chap-sync.html">3. Synchronization</a>
</li>
<li><a href="chap-networking.html">4. Networking</a>
</li>
<li><a href="sect-block-production.html">5. Block Production</a>
</li>
<li><a href="sect-finality.html">6. Finality</a>
</li>
<li><a href="sect-lightclient.html"><span class="toc-current">7. Light Clients</span></a>
<ul class="sectlevel2">
<li><a href="sect-lightclient.html#sect-requirements-lightclient">7.1. Requirements for Light Clients</a>
</li>
<li><a href="sect-lightclient.html#sect-sync-warp-lightclient">7.2. Warp Sync for Light Clients</a>
</li>
<li><a href="sect-lightclient.html#sect-runtime-environment-lightclient">7.3. Runtime Environment for Light Clients</a>
</li>
<li><a href="sect-lightclient.html#sect-light-msg">7.4. Light Client Messages</a>
</li>
<li><a href="sect-lightclient.html#sect-storage-lightclient">7.5. Storage for Light Clients</a>
</li>
</ul>
</li>
<li><a href="chapter-anv.html">8. Availability &amp; Validity</a>
</li>
</ul>
</li>
<li><a href="part-polkadot-runtime.html">Polkadot Runtime</a>
</li>
<li><a href="id-cryptography-encoding.html">Appendix D: Cryptography &amp; Encoding</a>
</li>
<li><a href="chap-host-api.html">Appendix E: Host API</a>
</li>
<li><a href="chap-runtime-api.html">Appendix F: Runtime API</a>
</li>
<li><a href="id-bibliography.html">Bibliography</a>
</li>
<li><a href="id-glossary.html">Glossary</a>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="sect-lightclient"><a class="anchor" href="#sect-lightclient"></a><a class="link" href="#sect-lightclient">7. Light Clients</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="sect-requirements-lightclient"><a class="anchor" href="#sect-requirements-lightclient"></a><a class="link" href="#sect-requirements-lightclient">7.1. Requirements for Light Clients</a></h3>
<div class="paragraph">
<p>We list requirements of a Light Client categorized along the the three dimensions of Functionality, Efficiency, and Security.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Functional Requirements:</strong></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Update state (<a href="chap-state.html#sect-state-storage">Section 2.4</a>) to reflect the latest view of the blockchain via synchronization with full nodes.</p>
</li>
<li>
<p>(Optional) Verify validity of runtime transitions (<a href="chap-state.html#sect-runtime-interaction">Section 2.6</a>).</p>
</li>
<li>
<p>Make queries for data at the latest block height or across a range of blocks.</p>
</li>
<li>
<p>Append extrinsics (<a href="chap-state.html#sect-extrinsics">Section 2.3</a>) to the blockchain via full nodes.</p>
</li>
</ol>
</div>
</li>
<li>
<p><strong>Efficiency Requirements:</strong></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Efficient bootstrapping and syncing: initializations and update functions of the state have tractable computation and communication complexity and grows at most linearly with the chain size. Generally, the complexity is proportional to the GRANDPA validator set change.</p>
</li>
<li>
<p>Querying operations happen by requesting athe key-value pair from a full node.</p>
</li>
<li>
<p>Further, verifying the validity of responses by the full node is logarithmic in the size of the state.</p>
</li>
</ol>
</div>
</li>
<li>
<p><strong>Security Requirements:</strong></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Secure bootstrapping and Synchronizing: Probability that an adversarial full node convincing a light client of a forged blockchain state is negligible.</p>
</li>
<li>
<p>Secure querying: Probability that an adversary convinces  light client to accept a forged account state os negligible.</p>
</li>
<li>
<p>Assure that the submitted extrinsics are appended in a successor block or inform the user incase of failure.</p>
</li>
</ol>
</div>
</li>
<li>
<p><strong>Polkadot Specific Requirements:</strong></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The client MUST be able to connect to a relay chain using chain state.</p>
</li>
<li>
<p>The client MUST be able to retrieve checkpoint state from a trusted source to speed up initialization.</p>
</li>
<li>
<p>The client MUST be able to subscribe/unsubscribe to/from any polkadot-spec-conformant relay chain (Polkadot, Westend, Kusama)</p>
</li>
<li>
<p>The client MUST be able to subscribe/unsubscribe to/from parachains that do not use custom protocols or cryptography methods other than those that Polkadot, Westend and Kusama use.</p>
</li>
<li>
<p>The client MUST support the following <a href="https://github.com/paritytech/json-rpc-interface-spec">RPC methods</a>: <code>rpc_methods</code>,  <code>chainHead_unstable_follow</code>, <code>chainHead_unstable_unfollow</code>, <code>chainHead_unstable_unpin</code>, <code>chainHead_unstable_storage</code>, <code>chainHead_unstable_call</code> <code>chainHead_unstable_stopCall</code>. <code>transaction_unstable_submitAndWatch</code>, and <code>transaction_unstable_unwatch</code></p>
</li>
<li>
<p>The client MUST support the @substrate/connect <a href="https://github.com/paritytech/substrate-connect/tree/main/packages/connect-extension-protocol">connection extension protocol</a>:
<code>ToApplicationError</code>, <code>ToApplicationChainReady</code>, <code>ToApplicationRpc</code>, <code>ToExtensionAddChain</code>, <code>ToExtensionAddWellKnownChain</code>, <code>ToExtensionRpc</code>, <code>ToExtensionRemoveChain</code>.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="sect-sync-warp-lightclient"><a class="anchor" href="#sect-sync-warp-lightclient"></a><a class="link" href="#sect-sync-warp-lightclient">7.2. Warp Sync for Light Clients</a></h3>
<div class="paragraph">
<p>Warp sync (<a href="chap-networking.html#sect-msg-warp-sync">Section 4.8.4</a>) only downloads the block headers where
authority set changes occurred, so-called fragments (<a href="chap-networking.html#defn-warp-sync-proof">Definition 41</a>),
and by verifying the GRANDPA justifications (<a href="sect-finality.html#defn-grandpa-justification">Definition 78</a>).
This protocol allows nodes to arrive at the desired state much faster than fast
sync. Warp sync is primarily designed for Light Clients. Although, warp sync could be used by full nodes, the sync process may lack information to cater to complete functionality set of full nodes.</p>
</div>
<div class="paragraph">
<p>For light clients, it is too expensive to download the state (approx. 550MB) to respond to queries. Rather, the queries are submitted to the Full node and only the response of the full node is validated using the hash of the state root.   Requests for warp sync are performed using the <code>/dot/sync/warp</code> <em>Request-Response</em> substream, the corresponding network messages are detailed in <a href="chap-networking.html#sect-protocols-substreams">Section 4.7</a>.</p>
</div>
<div class="paragraph">
<p>Light clients base their trust in provided snapshots and the ability to slash grandpa votes for equivocation for the period they are syncing via warp sync. Full nodes and above in contrast verify each block indvidually.</p>
</div>
<div class="paragraph">
<p>In theory, the <code>warp sync</code> process takes the Genesis Block as input and outputs the hash of the state trie root at the latest finalized block. This root hash acts as proof to further validate the responses to queries by the full node. The <code>warp sync</code> works by starting from a trusted specified block (for e.g. from a snapshot) and verifying the block headers only at the authority set changes.</p>
</div>
<div class="paragraph">
<p>Eventually, the light client verifies the finality of the block returned by a full node to ensure that the block is indeed the latest finalized block. This entails two things:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Check the authenticity of GRANDPA Justifications messages from Genesis to the last finalized block.</p>
</li>
<li>
<p>Check the timestamp of the last finalized block to ensure that no other blocks might have been finalized at a later timestamp.</p>
</li>
</ol>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<strong>Long-Range Attack Vulnerabilities</strong>: Warp syncing is particularly vulnerable to what is called long-range attacks. The authorities allowed to finalize blocks can generate multiple proofs of finality for
multiple different blocks of the same height, hence, they can finalize more than one chain at a time.
It is possible for two-thirds of the validators that were active at a certain
past block N to collude and decide to finalize a different block N', even when N has been
finalized for the first time several weeks or months in the past. When a client then warp syncs, it can be tricked to consider this alternative block N' as the finalized one. However, in practice, to mitigate Long-Range Attacks, the starting point of the warp syncing is not too far in the past. How far exactly depends on the logic of the runtime of the chain. For example, in Polkadot, the starting block for the sync should be at max 28 days old, to be within the purview of the slashing period for misbehaving nodes. Hence, even though in theory warp sync can start from Genesis Block, it is not advised to implement the same in practice.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We outline the warp sync process, abstracting out details of verifying the finality and how the full node to sync with is selected.</p>
</div>
<div class="sidebarblock">
<div class="content">
\INPUT BlockHeader startblock, the initial block to start the sync. May not be the Genesis Block.
\OUTPUT CommitmentRootHash $root$, State Tries Root hash of the latest finalized Block.

\STATE \textsc{fullnode} $\leftarrow$ SelectFullNode
\STATE \textsc{latestBlockHeader, grandpaJustifications} $\leftarrow$ SyncWithNode(\textsc{fullnode})
\STATE \textsc{isVerified} $\leftarrow$ verifyAuthoritySetChange(\textsc{grandpaJustifications}) $\land$ verifyFinality(\textsc{latestBlockHeader})

\IF{\textsc{isVerified}}
    \STATE $return$ $SOME$ getCommitmentRootHash(\textsc{latestBlockHeader})
\ENDIF
\STATE {$throw$ $ERROR$}
<div class="paragraph">
<p>Abstraction of Warp Sync and verification of latest block&#8217;s finality.</p>
</div>
<div class="paragraph">
<p>\(SelectFullNode\): Determines the full node that the light client syncs with.</p>
</div>
<div class="paragraph">
<p>\(SyncSithNode\): Returns the header of latest finalized block and a list of Grandpa Justifications by the full node.</p>
</div>
<div class="paragraph">
<p>\(verifyAuthoritySetChange\): Verification algorithm which checks the authenticity of the header only at the end of an era where the authority set changes iteratively until reaching the latest era.</p>
</div>
<div class="paragraph">
<p>\(verifyFinalty\): Verifies the finalty of the latest block using the Grandpa Justifications messages.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>The warp syncing process is closely coupled with the state querying procedure used the light client. We outline the process of querying the state by a light client and validating the response.</p>
</div>
<div class="sidebarblock">
<div class="content">
\INPUT Query q, BlockHeight h, CommitmentRootHash $root$
\OUTPUT Maybe Result $res$

\STATE ($res$, $\pi$) $\leftarrow QueryFullNode (q, h)$

\IF{$validityCheck_{root}(res, \pi)$}
    \STATE $return$ $SOME$ $res$
\ENDIF
\STATE {$throw$ $ERROR$}
<div class="paragraph">
<p>Querying State Algorithm.</p>
</div>
<div class="paragraph">
<p>\(QueryFullNode\): Returns the response to the query requested from the Full Node for the query \(q\) at block height \(h\).</p>
</div>
<div class="paragraph">
<p>\(validityCheck_{root}\): Predicate that checks the validity of response \(res\) and associated merkle proof \(\pi\) by matching it against the Commit Root Hash \(root\) obtained as a result of warp sync.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sect-runtime-environment-lightclient"><a class="anchor" href="#sect-runtime-environment-lightclient"></a><a class="link" href="#sect-runtime-environment-lightclient">7.3. Runtime Environment for Light Clients</a></h3>
<div class="paragraph">
<p>Technically, though a runtime execution environment is not necessary to build a light client, most clients require interacting with the Runtime and the state of the blockchain for integrity checks at the minimum. One can imagine an application scenarios like an on-chain light client which only listens to the latest state without ever adding extrinsics. Current implementations of Light Nodes (for e.g. Smoldot) uses the wasmtime as its runtime environment to drastically simplify the code. The performance of wasmtime is satisfying enough to not require a native runtime.
The details of runtime API that the environment needs to suppport can be found in Appendix C (<a href="chap-runtime-api.html">Appendix C</a>).</p>
</div>
</div>
<div class="sect2">
<h3 id="sect-light-msg"><a class="anchor" href="#sect-light-msg"></a><a class="link" href="#sect-light-msg">7.4. Light Client Messages</a></h3>
<div class="paragraph">
<p>Light clients are applications that fetch the required data that they need from
a Polkadot node with an associated proof to validate the data. This makes it
possible to interact with the Polkadot network without requiring to run a full
node or having to trust the remote peers. The light client messages make this
functionality possible.</p>
</div>
<div class="paragraph">
<p>All light client messages are protobuf encoded and are sent over the
<code>/dot/light/2</code> substream.</p>
</div>
<div class="sect3">
<h4 id="id-request"><a class="anchor" href="#id-request"></a><a class="link" href="#id-request">7.4.1. Request</a></h4>
<div class="paragraph">
<p>A message with all possible request messages. All message are sent as part of
this message.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 12.5%;">
<col style="width: 62.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Id</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>oneof</code> (<code>request</code>)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The request type</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Where the <code>request</code> can be one of the following fields:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 12.5%;">
<col style="width: 62.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Id</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RemoteCallRequest</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A remote call request (<a href="sect-lightclient.html#sect-light-remote-call-request">Definition 96</a>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RemoteReadRequest</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A remote read request (<a href="sect-lightclient.html#sect-light-remote-read-request">Definition 98</a>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RemoteReadChildRequest</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A remote read child request (<a href="sect-lightclient.html#sect-light-remote-read-child-request">Definition 100</a>)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="id-response"><a class="anchor" href="#id-response"></a><a class="link" href="#id-response">7.4.2. Response</a></h4>
<div class="paragraph">
<p>A message with all possible response messages. All message are sent as part of
this message.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 12.5%;">
<col style="width: 62.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Id</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>oneof</code> (<code>response</code>)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The response type</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Where the <code>response</code> can be one of the following fields:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 12.5%;">
<col style="width: 62.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Id</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RemoteCallResponse</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A remote call response (<a href="sect-lightclient.html#sect-light-remote-call-response">Definition 97</a>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RemoteReadResponse</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A remote read response (<a href="sect-lightclient.html#sect-light-remote-read-response">Definition 99</a>)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="id-remote-call-messages"><a class="anchor" href="#id-remote-call-messages"></a><a class="link" href="#id-remote-call-messages">7.4.3. Remote Call Messages</a></h4>
<div class="paragraph">
<p>Execute a call to a contract at the given block.</p>
</div>
<div id="sect-light-remote-call-request" class="exampleblock">
<div class="title">Definition 96. <a href="sect-lightclient.html#sect-light-remote-call-request">Remote Call Request</a></div>
<div class="content">
<div class="paragraph">
<p>Remote call request.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 71.4286%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Id</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bytes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Block at which to perform call</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>string</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Method name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bytes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Call data</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="sect-light-remote-call-response" class="exampleblock">
<div class="title">Definition 97. <a href="sect-lightclient.html#sect-light-remote-call-response">Remote Call Response</a></div>
<div class="content">
<div class="paragraph">
<p>Remote call response.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 71.4286%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Id</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bytes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An <em>Option</em> type (<a href="id-cryptography-encoding.html#defn-option-type">Definition 190</a>) containing the call proof or <em>None</em> if proof generation failed.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="id-remote-read-messages"><a class="anchor" href="#id-remote-read-messages"></a><a class="link" href="#id-remote-read-messages">7.4.4. Remote Read Messages</a></h4>
<div class="paragraph">
<p>Read a storage value at the given block.</p>
</div>
<div id="sect-light-remote-read-request" class="exampleblock">
<div class="title">Definition 98. <a href="sect-lightclient.html#sect-light-remote-read-request">Remote Read Request</a></div>
<div class="content">
<div class="paragraph">
<p>Remote read request.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 71.4286%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Id</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bytes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Block at which to perform call</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>repeated bytes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Storage keys</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="sect-light-remote-read-response" class="exampleblock">
<div class="title">Definition 99. <a href="sect-lightclient.html#sect-light-remote-read-response">Remote Read Response</a></div>
<div class="content">
<div class="paragraph">
<p>Remote read response.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 71.4286%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Id</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bytes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An <em>Option</em> type (<a href="id-cryptography-encoding.html#defn-option-type">Definition 190</a>) containing the read proof or <em>None</em> if proof generation failed.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="id-remote-read-child-messages"><a class="anchor" href="#id-remote-read-child-messages"></a><a class="link" href="#id-remote-read-child-messages">7.4.5. Remote Read Child Messages</a></h4>
<div class="paragraph">
<p>Read a child storage value at the given block.</p>
</div>
<div id="sect-light-remote-read-child-request" class="exampleblock">
<div class="title">Definition 100. <a href="sect-lightclient.html#sect-light-remote-read-child-request">Remote Read Child Request</a></div>
<div class="content">
<div class="paragraph">
<p>Remote read child request.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 71.4286%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Id</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bytes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Block at which to perform call</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bytes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Child storage key, this is relative to the child type storage location</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bytes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Storage keys</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="paragraph">
<p>The response is the same as for the <em>Remote Read Request</em> message, respectively
<a href="sect-lightclient.html#sect-light-remote-read-response">Definition 99</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sect-storage-lightclient"><a class="anchor" href="#sect-storage-lightclient"></a><a class="link" href="#sect-storage-lightclient">7.5. Storage for Light Clients</a></h3>
<div class="paragraph">
<p>The light client requires a persistent storage for saving the state of the blockchain. In addition it requires efficient Serialization/ De-serialization methods to transform SCALE (<a href="id-cryptography-encoding.html#sect-scale-codec">Section A.2.2</a>) encoded network traffic for storing and reading from the persistent storage.</p>
</div>
</div>
</div>
</div>
<div class="paragraph nav-footer">
<p>← Previous: <a href="sect-finality.html">Finality</a> | ↑ Up: <a href="part-polkadot-host.html">Polkadot Host</a> | ⌂ Home: <a href="polkadot-spec.html">Polkadot Protocol Specification</a> | Next: <a href="chapter-anv.html">Availability &amp; Validity</a> →</p>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 0.2.1<br>
Last updated 2023-03-09 11:37:31 +0100
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains("stemblock")) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>