<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.18">
<meta name="description" content="The Official Polkadot and Kusama Protocol Specification">
<meta name="keywords" content="babe, blockchain, consensus, finality, grandpa, kusama, parachain, polkadot, relay-chain, runtime, spec, web3, w3f">
<meta name="author" content="Web 3.0 Technologies Foundation">
<link rel="icon" type="image/png" href="./favicon.png">
<title>Polkadot Protocol Specification</title>
<style>
/* Fetch Unbounded - Normal - Regular */
@import url('https://fonts.googleapis.com/css2?family=Unbounded:wght@400&display=swap');
/* Fetch Work Sans - Normal + Italic - Regular + Bold */
@import url('https://fonts.googleapis.com/css2?family=Work+Sans:ital,wght@0,400;0,700;1,400;1,700&display=swap');
/* Fetch Asciidoctor Default Style Sheet */
@import url('https://cdn.jsdelivr.net/gh/asciidoctor/asciidoctor@2.0/data/stylesheets/asciidoctor-default.css');

/* Base constants of theme */
:root {
	--font-header: 'Unbounded', cursive;
	--font-text: 'Work Sans', sans-serif;

	--black: #1E1E1E;
	--white: #FFFFFF;

	--dark-blue: #172026;
	--grey: #efefef;

	--pink: #E6007A;
	--purple: #670d35;
}


/* Apply some layout corrections */
html {
	height: 100%;
}

body {
	min-height: 100%;
  	display: flex;
  	flex-direction: column;
}

.partintro {
	margin-bottom: 1.25rem;
}

/* Render part intros just like other text */
.partintro div.content {
	line-height: 1.6;
	font-size: 1.0625rem;
	letter-spacing: -.01em;
	text-rendering: optimizeLegibility;
}

/* Set our custom font */
body {
	font-family: var(--font-text);
}

h1, h2, h3, h4, h5, h6,
#toctitle,
#toc ul.sectlevel0 > li > a,
.sidebarblock > .content > .title {
	font-family: var(--font-header);
	font-weight: 400;
}

#toc ul{
	font-family: var(--font-text);
}

/* Set base colors */
body {
	color: var(--black);
	background-color: var(--white);
}

/* Style all titles */
h1, h2, h3, h4, h5, h6,
#toctitle,
.subheader,
.title {
	color: var(--pink);
}

/* - could be replaced by !important in previous block */
.sidebarblock > .content > .title,
.admonitionblock td.content > .title,
.audioblock > .title,
.exampleblock > .title,
.imageblock > .title,
.listingblock > .title,
.literalblock > .title,
.stemblock > .title,
.openblock > .title,
.paragraph > .title,
.quoteblock > .title,
table.tableblock > .title,
.verseblock > .title,
.videoblock > .title,
.dlist > .title,
.olist > .title,
.ulist > .title,
.qlist > .title,
.hdlist > .title {
	color: inherit;
}

h1 code,
h2 code,
h3 code,
h4 code,
h5 code,
h6 code {
    color: inherit;
}

/* Style all links */
a {
	color: var(--pink);
}

a:hover {
	color: var(--purple);
}

/* - same here, next two blocks or important above */
#content h1 > a.link,
h2 > a.link,
h3 > a.link, #toctitle > a.link,
h4 > a.link,
h5 > a.link,
h6 > a.link,
.sidebarblock > .content > .title > a.link {
	color: inherit;
}

#content h1 > a.link:hover,
h2 > a.link:hover,
h3 > a.link:hover,
h4 > a.link:hover,
h5 > a.link:hover,
h6 > a.link:hover,
#toctitle > a.link:hover,
.sidebarblock > .content > .title > a.link:hover {
	color: var(--purple);
}

/* Style header like toc on small screens */
@media screen and (max-width:768px) {
	#header {
		background-color: var(--dark-blue);
		max-width: none;
	}

	#header > h1:first-child {
  		color: var(--pink);
	}

	#header .details {
  		color: var(--white);
		border: none;
	}
}

/* Style table of content */
#toc.toc2 {
	background-color: var(--dark-blue);
	border: none;
}

#toc ul.sectlevel0 > li > a {
  font-weight: bold;
  font-style: normal;
  text-decoration: underline;
}

#toc a {
	color: var(--white);
}

#toc a code {
	color: inherit;
	background-color: inherit;
}

#toc a .toc-current,
#toc .tocify-focus a {
	color: var(--pink);
}

/* Tame SVG images */
.imageblock .content svg {
  max-width: 100%;
}

/* Style boxes */
.exampleblock > .content, 
.sidebarblock {
	background: var(--grey);
}

/* Style footer */
#footer {
	color: var(--white);
	background-color: var(--dark-blue);
}

/* CSS Ribbon */
.ribbon {
  position: absolute;
  width: 200px;
  height: 200px;
  overflow: hidden;
  z-index: 99999;
  top: 0px;
  right: 0px;
}

.ribbon a {
  display: inline-block;
  position: inherit;
  transform: rotate(45deg);
  width: 200px;
  top: 45px; 
  right: -40px;
  padding: 6px 0px;
  overflow: hidden;

  text-align: center;
  font-size: 12px;
  font-weight: bold;
  text-decoration: none;

  color: var(--white);
  background-color: var(--pink);
  background-image: linear-gradient(rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.15));
  border: 2px dotted var(--white);
  box-shadow: rgba(0, 0, 0, 0.5) 0px 2px 3px 0px;
}

/* MathJax v3 */
.stemblock mjx-container {
  text-align: center;
  display: block;
  width: 100%;
  margin: 1em 0em;
}

/* Pseudocode.js */
.ps-root {
  font-size: 1.2em !important;
}

/* Fix inline svg with fixed width or height. */
.imageblock .content svg {
  widht: auto;
  height: auto;
}

</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>.toc-current{font-weight: bold;} .toc-root{font-family: "Open Sans","DejaVu Sans",sans-serif;
                       font-size: 0.9em;} #content{display: flex; flex-direction: column; flex: 1 1 auto;}
             .nav-footer{text-align: center; margin-top: auto;}
             .nav-footer > p > a {white-space: nowrap;}</style>
</head>
<body id="sect-metadata" class="book toc2 toc-left">
<!-- Contribution Ribbon -->
<div class="ribbon"><a target="_blank" href="https://github.com/w3f/polkadot-spec">Contributions welcome!</a></div>
<div id="header">
<h1>Polkadot Protocol Specification</h1>
<div class="details">
<span id="author" class="author">Web 3.0 Technologies Foundation</span><br>
<span id="revnumber">version 0.2.1</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<p><span class="toc-root"><a href="polkadot-spec.html">Polkadot Protocol Specification</a></span></p><ul class="sectlevel1">
<li><a href="id-polkadot-protocol.html">Polkadot Protocol</a>
</li>
<li><a href="part-polkadot-host.html">Polkadot Host</a>
</li>
<li><a href="part-polkadot-runtime.html">Polkadot Runtime</a>
<ul class="sectlevel1">
<li><a href="id-extrinsics.html">9. Extrinsics</a>
</li>
<li><a href="id-weights.html">10. Weights</a>
</li>
<li><a href="id-consensus.html">11. Consensus</a>
</li>
<li><a href="sect-metadata.html"><span class="toc-current">12. Metadata</span></a>
<ul class="sectlevel2">
<li><a href="sect-metadata.html#sect-rtm-structure">12.1. Structure</a>
</li>
<li><a href="sect-metadata.html#sect-rtm-pallet-metadata">12.2. Pallet Metadata</a>
</li>
<li><a href="sect-metadata.html#sect-rtm-extrinsic-metadata">12.3. Extrinsic Metadata</a>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="id-cryptography-encoding.html">Appendix D: Cryptography &amp; Encoding</a>
</li>
<li><a href="chap-host-api.html">Appendix E: Host API</a>
</li>
<li><a href="chap-runtime-api.html">Appendix F: Runtime API</a>
</li>
<li><a href="id-bibliography.html">Bibliography</a>
</li>
<li><a href="id-glossary.html">Glossary</a>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="sect-metadata"><a class="anchor" href="#sect-metadata"></a><a class="link" href="#sect-metadata">12. Metadata</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The runtime metadata structure contains all the information necessary on how to
interact with the Polkadot runtime. Considering that Polkadot runtimes are
upgradable and therefore any interfaces are subject to change, the metadata
allows developers to structure any extrinsics or storage entries accordingly.</p>
</div>
<div class="paragraph">
<p>The metadata of a runtime is provided by a call to <code>Metadata_metadata</code> (<a href="chap-runtime-api.html#sect-rte-metadata-metadata">Section C.5.1</a>)
and is returned as a scale encoded (<a href="id-cryptography-encoding.html#sect-scale-codec">Section A.2.2</a>) binary blob. How to interpret and decode this
data is described in this chapter.</p>
</div>
<div class="sect2">
<h3 id="sect-rtm-structure"><a class="anchor" href="#sect-rtm-structure"></a><a class="link" href="#sect-rtm-structure">12.1. Structure</a></h3>
<div class="paragraph">
<p>The Runtime Metadata is a datastructure of the following format:</p>
</div>
<div class="stemblock">
<div class="content">
\$(M, v_m, R, P, t_e, v_e, E, t_r)\$
\$R = (r_0, ...,r_n)\$
\$P = (p_0, ...,p_n)\$
\$E = (e_0, ...,e_n)\$
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">where</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>\$M\$ are the first four constant bytes, spelling "meta" in ASCII.</p>
</li>
<li>
<p>\$v_m\$ is an unsigned 8-bit integer indicating the format version of the
metadata structure (currently the value of <code>14</code>).</p>
</li>
<li>
<p>\$R\$ is a sequence (<a href="id-cryptography-encoding.html#defn-scale-list">Definition 192</a>) of type definitions \$r_i\$
(<a href="sect-metadata.html#defn-rtm-registry-entry">Definition 159</a>).</p>
</li>
<li>
<p>\$P\$ is a sequence (<a href="id-cryptography-encoding.html#defn-scale-list">Definition 192</a>) of pallet metadata \$p_i\$
(<a href="sect-metadata.html#sect-rtm-pallet-metadata">Section 12.2</a>).</p>
</li>
<li>
<p>\$t_e\$ is the type Id (<a href="sect-metadata.html#defn-rtm-type-id">Definition 160</a>) of the extrinsics.</p>
</li>
<li>
<p>\$v_e\$ is an unsigned 8-bit integer indicating the format version of the
extrinsics (implying a possible breaking change).</p>
</li>
<li>
<p>\$E\$ is a sequence (<a href="id-cryptography-encoding.html#defn-scale-list">Definition 192</a>) of extrinsics metadata \$e_i\$
(<a href="sect-metadata.html#defn-rtm-signed-extension-metadata">Definition 170</a>).</p>
</li>
<li>
<p>\$t_r\$ is the type Id (<a href="sect-metadata.html#defn-rtm-type-id">Definition 160</a>) of the runtime.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
seq:
  - id: magic
    contents: meta
  - id: metadata_version
    type: u1

  - id: num_types
    type: scale::compact_int
  - id: types
    type: metadata_type
    repeat: expr
    repeat-expr: num_types.value

  - id: num_pallets
    type: scale::compact_int
  - id: pallets
    type: metadata_pallet
    repeat: expr
    repeat-expr: num_pallets.value

  - id: extrinsic_type
    type: scale::compact_int
  - id: extrinsic_version
    type: u1
  - id: num_extrinsics
    type: scale::compact_int
  - id: extrinsics
    type: metadata_extrinsic
    repeat: expr
    repeat-expr: num_extrinsics.value

  - id: runtime_type
    type: scale::compact_int
<div id="defn-rtm-registry-entry" class="exampleblock">
<div class="title">Definition 159. <a href="sect-metadata.html#defn-rtm-registry-entry">Runtime Registry Type Entry</a></div>
<div class="content">
<div class="paragraph">
<p>A registry entry contains information about a type in its portable form for
serialization. The entry is a datastructure of the following format:</p>
</div>
<div class="stemblock">
<div class="content">
\$r_i = ("id"_t,p,T,D,c)\$
\$T = (t_0, ...,t_n)\$
\$t_i = (n, y)\$
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">where</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>\$"id"_t\$ is a compact integer indicating the identifier of the type.</p>
</li>
<li>
<p>\$p\$ is the path of the type, optional and based on source file location. Encoded as a sequence (<a href="id-cryptography-encoding.html#defn-scale-list">Definition 192</a>) of strings.</p>
</li>
<li>
<p>\$T\$ is a sequence (<a href="id-cryptography-encoding.html#defn-scale-list">Definition 192</a>) of generic parameters (empty for non-generic types).</p>
<div class="ulist">
<ul>
<li>
<p>\$n\$ is the name string of the generic type parameter</p>
</li>
<li>
<p>\$y\$ is a <em>Option</em> type containing a type Id (<a href="sect-metadata.html#defn-rtm-type-id">Definition 160</a>).</p>
</li>
</ul>
</div>
</li>
<li>
<p>\$D\$ is the type definition (<a href="sect-metadata.html#defn-rtm-type-definition">Definition 161</a>).</p>
</li>
<li>
<p>\$c\$ is the documentation as sequence (<a href="id-cryptography-encoding.html#defn-scale-list">Definition 192</a>) of strings.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
seq:
  - id: id
    type: scale::compact_int

  - id: path
    type: scale::string_list

  - id: num_params
    type: scale::compact_int
  - id: params
    repeat: expr
    repeat-expr: num_params.value
    type: param

  - id: definition
    type: metadata_type_definition

  - id: docs
    type: scale::string_list
types:
  param:
    seq:
      - id: name
        type: scale::string
      - id: type
        type: scale::maybe_compact_int
</div>
</div>
<div id="defn-rtm-type-id" class="exampleblock">
<div class="title">Definition 160. <a href="sect-metadata.html#defn-rtm-type-id">Runtime Type Id</a></div>
<div class="content">
<div class="paragraph">
<p>The <strong>runtime type Id</strong> is a compact integer representing the index of the entry
(<a href="sect-metadata.html#defn-rtm-registry-entry">Definition 159</a>) in \$R, P\$ or \$E\$ of the runtime metadata
structure (<a href="sect-metadata.html#sect-rtm-structure">Section 12.1</a>), depending on context (starting at \$0\$).</p>
</div>
</div>
</div>
<div id="defn-rtm-type-definition" class="exampleblock">
<div class="title">Definition 161. <a href="sect-metadata.html#defn-rtm-type-definition">Type Variant</a></div>
<div class="content">
<div class="paragraph">
<p>The type definition \$D\$ is a varying datatype (<a href="id-cryptography-encoding.html#defn-varrying-data-type">Definition 188</a>)
and indicates all the possible types of encodable values a type can have.</p>
</div>
<div class="stemblock">
<div class="content">
\$D = {
	(0,-&gt;,C,"composite type (e.g. structure or tuple)"),
	(1,-&gt;,V,"variant type"),
	(2,-&gt;,s_v,"sequence type varying length"),
	(3,-&gt;,S,"sequence with fixed length"),
	(4,-&gt;,T,"tuple type"),
	(5,-&gt;,P,"primitive type"),
	(6,-&gt;,e,"compact encoded type"),
	(7,-&gt;,B,"sequence of bits")
:}\$
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">where</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>\$C\$ is a sequence of the following format:</p>
<div class="stemblock">
<div class="content">
\$C = (f_0, ..., f_n)\$
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>\$f_i\$ is a field (<a href="sect-metadata.html#defn-rtm-field">Definition 162</a>).</p>
</li>
</ul>
</div>
</li>
<li>
<p>\$V\$ is a sequence of the following format:</p>
<div class="stemblock">
<div class="content">
\$V = (v_0, ..., v_n)\$
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>\$v_i\$ is a variant (<a href="sect-metadata.html#defn-rtm-variant">Definition 163</a>).</p>
</li>
</ul>
</div>
</li>
<li>
<p>\$s_v\$ is a type Id (<a href="sect-metadata.html#defn-rtm-type-id">Definition 160</a>).</p>
</li>
<li>
<p>\$S\$ is of the following format:</p>
<div class="stemblock">
<div class="content">
\$S = (l, y)\$
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>\$l\$ is a unsigned 32-bit integer indicating the length</p>
</li>
<li>
<p>\$y\$ is a type Id (<a href="sect-metadata.html#defn-rtm-type-id">Definition 160</a>).</p>
</li>
</ul>
</div>
</li>
<li>
<p>\$T\$ is a sequence (<a href="id-cryptography-encoding.html#defn-scale-list">Definition 192</a>) of type Ids (<a href="sect-metadata.html#defn-rtm-type-id">Definition 160</a>).</p>
</li>
<li>
<p>\$P\$ is a varying datatype (<a href="id-cryptography-encoding.html#defn-varrying-data-type">Definition 188</a>) of the following
structure:</p>
<div class="stemblock">
<div class="content">
\$P = {
	(0,"boolean"),
	(1,"char"),
	(2,"string"),
	(3,"unsigned 8-bit integer"),
	(4,"unsigned 16-bit integer"),
	(5,"unsigned 32-bit integer"),
	(6,"unsigned 64-bit integer"),
	(7,"unsigned 128-bit integer"),
	(8,"unsigned 256-bit integer"),
	(9,"signed 8-bit integer"),
	(10,"signed 16-bit integer"),
	(11,"signed 32-bit integer"),
	(12,"signed 64-bit integer"),
	(13,"signed 128-bit integer"),
	(14,"signed 256-bit integer")
:}\$
</div>
</div>
</li>
<li>
<p>\$e\$ is a type Id (<a href="sect-metadata.html#defn-rtm-type-id">Definition 160</a>).</p>
</li>
<li>
<p>\$B\$ is a datastructure of the following format:</p>
<div class="stemblock">
<div class="content">
\$B = (s, o)\$
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>\$s\$ is a type Id (<a href="sect-metadata.html#defn-rtm-type-id">Definition 160</a>) representing the bit store
order (<a href="https://docs.rs/bitvec/latest/bitvec/store/trait.BitStore.html">external
reference</a>)</p>
</li>
<li>
<p>\$o\$ is a type Id (<a href="sect-metadata.html#defn-rtm-type-id">Definition 160</a>) the bit order type
(<a href="https://docs.rs/bitvec/latest/bitvec/order/trait.BitOrder.html">external
reference</a>).</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</dd>
</dl>
</div>
seq:
  - id: type
    type: u1
    enum: type
  - id: details
    type:
      switch-on: type
      cases:
        "type::composite": metadata_type_fields
        "type::variant": metadata_type_variants
        "type::sequence": sequence
        "type::array": array
        "type::tuple": tuple
        "type::primitive": primitive
        "type::compact": compact
        "type::bits": bits
enums:
  type:
    0: composite
    1: variant
    2: sequence
    3: array
    4: tuple
    5: primitive
    6: compact
    7: bits
types:
  sequence:
    seq:
      - id: type
        type: scale::compact_int

  array:
    seq:
      - id: length
        type: u4
      - id: type
        type: scale::compact_int

  tuple:
    seq:
      - id: num_types
        type: scale::compact_int
      - id: types
        type: scale::compact_int
        repeat: expr
        repeat-expr: num_types.value

  primitive:
    seq:
      - id: id
        type: u1
        enum: pid
    enums:
      pid:
        0: bool
        1: char
        2: str
        3: uint8
        4: uint16
        5: uint32
        6: uint64
        7: uint128
        8: uint256
        9: int8
        10: int16
        11: int32
        12: int64
        13: int128
        14: int256

  compact:
    seq:
      - id: type
        type: scale::compact_int

  bits:
    seq:
      - id: type
        type: scale::compact_int
      - id: order
        type: scale::compact_int
</div>
</div>
<div id="defn-rtm-field" class="exampleblock">
<div class="title">Definition 162. <a href="sect-metadata.html#defn-rtm-field">Field</a></div>
<div class="content">
<div class="paragraph">
<p>A field of a datastructure of the following format:</p>
</div>
<div class="stemblock">
<div class="content">
\$f_i = (n, y, y_n, C)\$
</div>
</div>
<div class="paragraph">
<p>where</p>
</div>
<div class="ulist">
<ul>
<li>
<p>\$n\$ is an <em>Option</em> type containing the string that indicates the field name.</p>
</li>
<li>
<p>\$y\$ is a type Id (<a href="sect-metadata.html#defn-rtm-type-id">Definition 160</a>).</p>
</li>
<li>
<p>\$y_n\$ is an <em>Option</em> type containing a string that indicates the name of the
type as it appears in the source code.</p>
</li>
<li>
<p>\$C\$ is a sequence of varying length containing strings of documentation.</p>
</li>
</ul>
</div>
seq:
  - id: num_fields
    type: scale::compact_int
  - id: fields
    type: field
    repeat: expr
    repeat-expr: num_fields.value
types:
  field:
    seq:
      - id: name
        type: scale::maybe_string
      - id: type
        type: scale::compact_int
      - id: typename
        type: scale::maybe_string
      - id: docs
        type: scale::string_list
</div>
</div>
<div id="defn-rtm-variant" class="exampleblock">
<div class="title">Definition 163. <a href="sect-metadata.html#defn-rtm-variant">Variant</a></div>
<div class="content">
<div class="paragraph">
<p>A struct variant of the following format:</p>
</div>
<div class="stemblock">
<div class="content">
\$v_i = (n,F,k,C)\$
</div>
</div>
<div class="paragraph">
<p>where</p>
</div>
<div class="ulist">
<ul>
<li>
<p>\$n\$ is a string representing the name of the variant.</p>
</li>
<li>
<p>\$F\$ is a possible empty array of varying length containing field
(<a href="sect-metadata.html#defn-rtm-field">Definition 162</a>) elements.</p>
</li>
<li>
<p>\$k\$ is an unsigned 8-bit integer indicating the index of the variant.</p>
</li>
<li>
<p>\$C\$ is a sequence of strings containing the documentation.</p>
</li>
</ul>
</div>
seq:
  - id: num_variants
    type: scale::compact_int
  - id: variants
    type: variant
    repeat: expr
    repeat-expr: num_variants.value
types:
  variant:
    seq:
      - id: name
        type: scale::string
      - id: composite
        type: metadata_type_fields
      - id: index
        type: u1
      - id: docs
        type: scale::string_list
</div>
</div>
</div>
<div class="sect2">
<h3 id="sect-rtm-pallet-metadata"><a class="anchor" href="#sect-rtm-pallet-metadata"></a><a class="link" href="#sect-rtm-pallet-metadata">12.2. Pallet Metadata</a></h3>
<div class="paragraph">
<p>All the metadata about a pallet, part of the main structure
(<a href="sect-metadata.html#sect-rtm-structure">Section 12.1</a>) and of the following format:</p>
</div>
<div class="stemblock">
<div class="content">
\$p_i = (n, S, a, e, C, e, i)\$
</div>
</div>
<div class="paragraph">
<p>where</p>
</div>
<div class="ulist">
<ul>
<li>
<p>\$n\$ is a string representing the pallet name.</p>
</li>
<li>
<p>\$S\$ is an <em>Option</em> type containing the pallet storage metadata
(<a href="sect-metadata.html#defn-rtm-pallet-storage-metadata">Definition 164</a>).</p>
</li>
<li>
<p>\$a\$ is an <em>Option</em> type (<a href="id-cryptography-encoding.html#defn-option-type">Definition 190</a>) containing the type Id (<a href="sect-metadata.html#defn-rtm-type-id">Definition 160</a>) of pallet calls.</p>
</li>
<li>
<p>\$e\$ is an <em>Option</em> type (<a href="id-cryptography-encoding.html#defn-option-type">Definition 190</a>) containing the type Id (<a href="sect-metadata.html#defn-rtm-type-id">Definition 160</a>) of pallet events.</p>
</li>
<li>
<p>\$C\$ is an <em>Sequence</em> (<a href="id-cryptography-encoding.html#defn-scale-list">Definition 192</a>) of all pallet constant metadata
(<a href="sect-metadata.html#defn-rtm-pallet-constants">Definition 169</a>).</p>
</li>
<li>
<p>\$e\$ is an <em>Option</em> type (<a href="id-cryptography-encoding.html#defn-option-type">Definition 190</a>) containing the type Id (<a href="sect-metadata.html#defn-rtm-type-id">Definition 160</a>) of the pallet error.</p>
</li>
<li>
<p>\$i\$ is an unsigned 8-bit integers indicating the index of the pallet, which is used for encoding pallet events and calls.</p>
</li>
</ul>
</div>
seq:
  - id: name
    type: scale::string

  - id: has_storage
    type: u1
  - id: storage
    type: pallet_storage
    if: has_storage != 0

  - id: has_calls
    type: u1
  - id: calls
    type: calls
    if: has_calls != 0

  - id: has_events
    type: u1
  - id: events
    type: events
    if: has_events != 0

  - id: num_constants
    type: scale::compact_int
  - id: constants
    type: pallet_constant
    repeat: expr
    repeat-expr: num_constants.value

  - id: has_errors
    type: u1
  - id: errors
    type: errors
    if: has_errors != 0

  - id: index
    type: u1
types:
  calls:
    seq:
      - id: type
        type: scale::compact_int

  events:
    seq:
      - id: type
        type: scale::compact_int

  errors:
    seq:
      - id: type
        type: scale::compact_int
<div id="defn-rtm-pallet-storage-metadata" class="exampleblock">
<div class="title">Definition 164. <a href="sect-metadata.html#defn-rtm-pallet-storage-metadata">Pallet Storage Metadata</a></div>
<div class="content">
<div class="paragraph">
<p>The metadata about a pallets storage.</p>
</div>
<div class="stemblock">
<div class="content">
\$S = (p, E)\$
\$E = ( e_0, ... , e_n )\$
</div>
</div>
<div class="paragraph">
<p>where</p>
</div>
<div class="ulist">
<ul>
<li>
<p>\$p\$ is the string representing the common prefix used by all storage entries.</p>
</li>
<li>
<p>\$E\$ is an array of varying length containing elements of storage entries
(<a href="sect-metadata.html#defn-rtm-storage-entry-metadata">Definition 165</a>).</p>
</li>
</ul>
</div>
</div>
</div>
<div id="defn-rtm-storage-entry-metadata" class="exampleblock">
<div class="title">Definition 165. <a href="sect-metadata.html#defn-rtm-storage-entry-metadata">Storage Entry Metadata</a></div>
<div class="content">
<div class="paragraph">
<p>The metadata about a pallets storage entry.</p>
</div>
<div class="stemblock">
<div class="content">
\$e_i = (n, m, y, d, C)\$
\$C = ( c_0, ... , c_n )\$
</div>
</div>
<div class="paragraph">
<p>where</p>
</div>
<div class="ulist">
<ul>
<li>
<p>\$n\$ is the string representing the variable name of the storage entry.</p>
</li>
<li>
<p>\$m\$ is an enum type determining the storage entry modifier
(<a href="sect-metadata.html#defn-rtm-storage-entry-modifier">Definition 166</a>).</p>
</li>
<li>
<p>\$y\$ is the type of the value stored in the entry
(<a href="sect-metadata.html#defn-rtm-storage-entry-type">Definition 167</a>).</p>
</li>
<li>
<p>\$d\$ is an byte array containing the default value.</p>
</li>
<li>
<p>\$C\$ is an array of varying length of strings containing the documentation.</p>
</li>
</ul>
</div>
seq:
  - id: prefix
    type: scale::string

  - id: num_items
    type: scale::compact_int
  - id: items
    type: item
    repeat: expr
    repeat-expr: num_items.value
types:
  item:
    seq:
      - id: name
        type: scale::string

      - id: modifier
        type: u1
        enum: storage_modifier

      - id: definition
        type: storage_definition

      - id: fallback
        type: scale::bytes

      - id: docs
        type: scale::string_list
    enums:
      storage_modifier:
        0: optional
        1: default
</div>
</div>
<div id="defn-rtm-storage-entry-modifier" class="exampleblock">
<div class="title">Definition 166. <a href="sect-metadata.html#defn-rtm-storage-entry-modifier">Storage Entry Modifier</a></div>
<div class="content">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This might be incorrect and has to be reviewed.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The storage entry modifier is a varying datatype (<a href="id-cryptography-encoding.html#defn-varrying-data-type">Definition 188</a>)
and indicates how the storage entry is returned and how it behaves if the entry
is not present.</p>
</div>
<div class="stemblock">
<div class="content">
\$m = {
	(0,"optional"),
	(1,"default")
:}\$
</div>
</div>
<div class="paragraph">
<p>where <em>0</em> indicates that the entry returns an <em>Option</em> type and therefore <em>None</em>
if the storage entry is not present. <em>1</em> indicates that the entry returns the
type \$y\$ with default value \$d\$ (in
<a href="sect-metadata.html#defn-rtm-storage-entry-metadata">Definition 165</a>) if the entry is not present.</p>
</div>
</div>
</div>
<div id="defn-rtm-storage-entry-type" class="exampleblock">
<div class="title">Definition 167. <a href="sect-metadata.html#defn-rtm-storage-entry-type">Storage Entry Type</a></div>
<div class="content">
<div class="paragraph">
<p>The type of the storage value is a varying datatype
(<a href="id-cryptography-encoding.html#defn-varrying-data-type">Definition 188</a>) that indicates how the entry is stored.</p>
</div>
<div class="stemblock">
<div class="content">
\$y = {
	(0,-&gt;,t,"plain type"),
	(1,-&gt;,(H, k, v),"storage map")
:}\$
</div>
</div>
<div class="paragraph">
<p>where \$t\$, \$k\$ (key) and \$v\$ (value) are all of type Ids
(<a href="sect-metadata.html#defn-rtm-type-id">Definition 160</a>). \$H\$ is an array of varying length containing the
storage hasher (<a href="sect-metadata.html#defn-rtm-storage-hasher">Definition 168</a>).</p>
</div>
seq:
  - id: type
    type: u1
    enum: storage_type
  - id: details
    type:
      switch-on: type
      cases:
        'storage_type::plain': plain
        'storage_type::map': map
enums:
  storage_type:
    0: plain
    1: map
types:
  plain:
    seq:
      - id: type
        type: scale::compact_int
  map:
    seq:
      - id: num_hasher
        type: scale::compact_int
      - id: hasher
        type: u1
        enum: hasher_type
        repeat: expr
        repeat-expr: num_hasher.value

      - id: key
        type: scale::compact_int
      - id: value
        type: scale::compact_int
    enums:
      hasher_type:
        0: blake2_128
        1: blake2_256
        2: blake2_128_128
        3: xxhash_128
        4: xxhash_256
        5: xxhahs_64_64
        6: idhash
</div>
</div>
<div id="defn-rtm-storage-hasher" class="exampleblock">
<div class="title">Definition 168. <a href="sect-metadata.html#defn-rtm-storage-hasher">Storage Hasher</a></div>
<div class="content">
<div class="paragraph">
<p>The hashing algorithm used by storage maps.</p>
</div>
<div class="stemblock">
<div class="content">
\${
	(0,"128-bit Blake2 hash"),
	(1,"256-bit Blake2 hash"),
	(2,"Multiple 128-bit Blake2 hashes concatenated"),
	(3,"128-bit XX hash"),
	(4,"256-bit XX hash"),
	(5,"Multiple 64-bit XX hashes concatenated"),
	(6,"Identity hashing")
:}\$
</div>
</div>
</div>
</div>
<div id="defn-rtm-pallet-constants" class="exampleblock">
<div class="title">Definition 169. <a href="sect-metadata.html#defn-rtm-pallet-constants">Pallet Constants</a></div>
<div class="content">
<div class="paragraph">
<p>The metadata about the pallets constants.</p>
</div>
<div class="stemblock">
<div class="content">
\$c_i = (n, y, v, C)\$
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">where</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>\$n\$ is a string representing the name of the pallet constant.</p>
</li>
<li>
<p>\$y\$ is the type Id (<a href="sect-metadata.html#defn-rtm-type-id">Definition 160</a>) of the pallet constant.</p>
</li>
<li>
<p>\$v\$ is a byte array containing the value of the constant.</p>
</li>
<li>
<p>\$C\$ is an array of varying length containing string with the documentation.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
seq:
  - id: name
    type: scale::string
  - id: type
    type: scale::compact_int
  - id: value
    type: scale::bytes
  - id: docs
    type: scale::string_list
</div>
</div>
</div>
<div class="sect2">
<h3 id="sect-rtm-extrinsic-metadata"><a class="anchor" href="#sect-rtm-extrinsic-metadata"></a><a class="link" href="#sect-rtm-extrinsic-metadata">12.3. Extrinsic Metadata</a></h3>
<div class="paragraph">
<p>The metadata about a pallets extrinsics, part of the main structure
(<a href="sect-metadata.html#sect-rtm-structure">Section 12.1</a>) and of the following format:</p>
</div>
<div id="defn-rtm-signed-extension-metadata" class="exampleblock">
<div class="title">Definition 170. <a href="sect-metadata.html#defn-rtm-signed-extension-metadata">Signed Extension Metadata</a></div>
<div class="content">
<div class="paragraph">
<p>The metadata about the additional, signed data required to execute an extrinsic.</p>
</div>
<div class="stemblock">
<div class="content">
\$e_i = (n, y, a)\$
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">where</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>\$n\$ is a string representing the unique signed extension identifier,
which may be different from the type name.</p>
</li>
<li>
<p>\$y\$ is a type Id (<a href="sect-metadata.html#defn-rtm-type-id">Definition 160</a>) of the signed extension, with the
data to be included in the extrinsic.</p>
</li>
<li>
<p>\$a\$ is the type Id (<a href="sect-metadata.html#defn-rtm-type-id">Definition 160</a>) of the additional signed data,
with the data to be included in the signed payload.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
seq:
  - id: name
    type: scale::string
  - id: type
    type: scale::compact_int
  - id: additional
    type: scale::compact_int
</div>
</div>
</div>
</div>
</div>
<div class="paragraph nav-footer">
<p>← Previous: <a href="id-consensus.html">Consensus</a> | ↑ Up: <a href="part-polkadot-runtime.html">Polkadot Runtime</a> | ⌂ Home: <a href="polkadot-spec.html">Polkadot Protocol Specification</a> | Next: <a href="id-cryptography-encoding.html">Appendix A: Cryptography &amp; Encoding</a> →</p>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 0.2.1<br>
Last updated 2023-03-09 11:37:31 +0100
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains("stemblock")) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>